# Инструкция по развертыванию

## Предварительные требования

* **Установленный .NET Core SDK** (версия 9.0)
* **Git** для работы с репозиторием
* **Visual Studio** или **Visual Studio Code**

## Клонирование репозитория

```bash
git clone https://github.com/ya-kush/ad-platforms.git
cd ad-platforms
```

## Настройка окружения

* Установите зависимости:
```bash
dotnet restore
```

## Тестирование проекта

* Запуск юнит тестов:
```bash
dotnet test
```

## Запуск приложения

* Настройте параметры в файлах **appsettings.json** и **launchSettings.json** по необходисти
* В терминале выполните команду:
```bash
dotnet run --project src/back
```

* Приложение должно запуститься на порту 5100 (http://localhost:5100)

## Конечные точки

### GET /platforms?at={location}

* **Параметры запроса**:
  * `at` - обязательный параметр. Строка представляющая регион. Значение праметра должно состоять из строчных букв начинающееся cо слеша (**/**) и разделяемое ими
* **Пример запроса**:
```bash
GET http://localhost:5100/platforms?at=/ru/msk
```

### PUT /platforms

* **Тело запроса** (JSON): Строка представляющая собой пары ключ-значение. Одна пара на одну строку. Разделители строк: **\n**, **\n\r** . Ключ и значение разделяются двоеточием. Значение - список регионов разделяемых запятой
* **Пример запроса**:
```bash
PUT http://localhost:5000/api/platforms
{
    "Яндекс.Реклама:/ru\nРеклама Урал:/ru/chelobl,/ru/ufa"
}
```

## Проверка работоспособности

* Можно перейдите на http://localhost:5100/healthz для базовой проверки
* Используйте **Scalar** для тестирования:
  * Перейдите к обозревателю (http://localhost:5100/scalar)
  * Выберите конечную точку
  * Укажите обязательные значения
  * Отправьте запрос и дождитель ответа

## Обработка ошибок

* При отсутствии обязательных параметров - статус **400 Bad Request**
* При неверном формате запроса возвращается статус **400 Bad Request**
* При внутренних ошибках - статус **500 Internal Server Error**